# APLIKACJA DeciRADAR - projekt w ramach kursu Zaawansowane programowanie aplikacji mobilnych 
Tematem projektu było stworzenie aplikacji mobilnej na system operacyjny typu  Android - DeciRADAR. Jej głównym celem jest monitorowanie i analizowanie hałasu w otoczeniu użytkownika aplikacji, wykorzystując przy tym jeden z wbudowanych w telefonie przetworników, a konkretnie przetwornik elektroakustyczny - mikrofon. Ponadto aplikacja ma na celu ochronę słuchu użytkownika, co może znaleźć szczególne zastosowanie wśród osób narażonych na hałas np. pracownicy budowy, DJ-e czy pracownicy szkół. Oprócz tego aplikacja może również stanowić cenne narzędzie dla społeczności miejskich - może pomóc mieszkańcom monitorować hałaśliwe miejsca w ich otoczeniu, tak by wspierać inicjatywy mające na celu ich wyciszenie, tym samym przyczyniając się do poprawy ich jakości życia. DeciRADAR może być również przydatnym narzędziem dla rodziców chcących kontrolować poziom hałasu w otoczeniu swojego dziecka, by zminimalizować u niego ryzyko uszkodzenia słuchu.

## Uzasadnienie wyboru tematu
Jednym z głównych zagrożeń środowiskowych współczesnego świata jest hałas. Ma on istotny wpływ na jakość życia i zdrowie mieszkańców całego świata. Dane literaturowe oraz raporty WHO wskazują, iż społeczeństwo, w szczególności zamieszkujące miasta jest narażone na hałas, a problem hałasu i jego konsekwencji na zdrowie człowieka stale rośnie. Niestety większość osób nie jest świadomych, jakie zagrożenia są związane z przebywaniem i życiem w hałaśliwym środowisku. Nadmierny poziom hałasu obecny w codziennym otoczeniu człowieka prowadzi do uszkodzeń słuchu, ale nie tylko, przyczynia się on również do problemów ze snem, stresem i nadciśnieniem. Można więc zauważyć, iż istnieje wyraźna potrzeba stworzenia narzędzia umożliwiającego monitorowanie hałasu w otoczeniu człowieka, w przyjazny i łatwy dla niego sposób. Naturalnym rozwiązaniem wydaje się, więc stworzenie aplikacji mobilnej na telefon, którym dysponuje i potrafi z niego korzystać większość społeczeństwa. Aplikacja DeciRADAR mogłaby stanowić idealne rozwiązanie wspierające mieszkańców miast w monitorowaniu głośnych przestrzeni i przyczynić się tym samym do powstawania inicjatyw mających na celu ich wyciszenie, przyczyniając się jednocześnie do poprawy komfortu ich życia. Jednakże hałas nie jest obecny jedynie w metropoliach, na niego w szczególności narażone są niektóre grupy zawodowe, takie jak na przykład sektor budowlany, muzyczny czy edukacyjny. Ekspozycja na hałas w miejscu pracy powadzi często do trwałych uszkodzeń słuchu. Przeprowadzane badania pokazują, iż wysokie ryzyko rozwoju nieodwracalnych ubytków słuchu wynika z wieloletniej ekspozycji na hałas. Aplikacja DeciRADAR pełni więc funkcję narzędzia ostrzegającego przed przekroczeniem bezpiecznych dla użytkownika poziomów hałasu, tym samym pomagając w zapobieganiu uszkodzeniom słuchu. Hałas stanowi również istotny problem w środowisku szkolnym. W szczególności dotyczy to uczniów i nauczycieli klas I-III. Regularne narażenie na hałas uczniów i pracowników oświaty skutkuje pojawieniem się wad słuchu, nadmiernym stresem, trudnościami w koncentracji uwagi i problemami z bezsennością. W związku z powyższym DeciRADAR może również pomóc nauczycielom i rodzicom w monitorowaniu poziomu hałasu w salach lekcyjnych i na korytarzach, co mogłoby skutkować zaimplementowaniem adekwatnych działań redukujących skutki nadmiernego natężenia dźwięku w otoczeniu szkolnym. Podsumowując można stwierdzić, iż aplikacja DeciRADAR odpowiada na współczesne problemy związane z hałasem w różnorodnych środowiskach, od miast, poprzez place budowy, sale koncertowe, szkoły czy nawet dom. Stworzenie tej aplikacji może więc przyczynić się do poprawy świadomości wśród społeczeństwa związanej z zagrożeniami, jakie niesie za sobą przebywanie w hałaśliwym środowisku, ale przede wszystkim mogłaby ona pomóc użytkownikom w ochronie słuchu i przyczynić się do poprawy komfortu ich życia.

## Wykorzystane technologie, języki programowania, środowiska, biblioteki i frameworki
Do najważniejszych technologii, z których skorzystałyśmy podczas pisania naszej aplikacji należą: Android SDK: środowisko wykorzystane w celu stworzenia aplikacji na Androida, Kotlin: język programowania, z którego skorzystałyśmy pisząc aplikację, Firebase: platforma wykorzystana do autoryzacji użytkowników (Authentication) i~przechowywania ich danych (Firestore) a także wysyłania powiadomień Push (Messaging), RecyclerView: wykorzystałyśmy ten komponent do wyświetlania listy pomiarów natężenia dźwięku, Intent: wykorzystałyśmy go do komunikacji pomiędzy komponentami aplikacji, Coroutines: kourtyny wykorzystane zostały do  wykonywania operacji asynchronicznych (dodawanie, pobieranie, aktualizowanie i usuwanie danych z bazy danych), Material Components: do utworzenia elementów interfejsu graficznego użytkownika (przyciski, pola tekstowe, przełączniki itp.)
## Zrealizowane funkcjonalności aplikacji
### Logowanie - pierwsza aktywność aplikacji
Po wejściu w naszą aplikację wyświetla się okno logowania. W oknie tym nowy użytkownik może się zarejestrować do aplikacji po kliknięciu ZAREJESTRUJ SIĘ, a użytkownik posiadający już konto może zalogować się poprzez kliknięcie ZALOGUJ SIĘ (wpisuje on w pole EMAIL swój adres mailowy użyty podczas rejestracji, a w polu HASŁO podaje swoje hasło do aplikacji). W przypadku powodzenia otrzymuje komunikat o pozytywnym efekcie logowania, a w momencie, gdy podane email i/lub hasło są nieprawidłowe informacje o tym, że wpisał niepoprawne dane.
### Rejestracja do aplikacji
Nowy użytkownik ma możliwość zarejestrowania się do naszej aplikacji poprzez wypełnienie formularza rejestracji wyświetlającego się po kliknięciu przycisku ZAREJESTRUJ SIĘ na pierwszym ekranie aplikacji. Formularz rejestracyjny w pierwszej części (zawiera pola do wpisania imienia, nazwiska, maila, hasła i powtórzenie hasła). Po wypełnieniu wszystkich powyżej zdefiniowanych pól użytkownik klika ZAPISZ i jest przenoszony do drugiej części rejestracji,  w której podaje godziny trwania trybu nocnego (początek i koniec). W celu ułatwienia wprowadzenia godzin skorzystano z TimePickerDialog. Po wpisaniu wszystkich informacji i kliknięciu ZAPISZ użytkownik jest przenoszony do strony logowania do aplikacji.
### Ekran główny aplikacji
Na ekranie głównym (w górnej jego części) wyświetlane jest aktualne natężenie dźwięku w dB, obok wyświetlanej wartości znajduje się ikona zapisz, pozwalająca na ręczne zapisywanie wyników do Firestore. Po zapisaniu wyniku wyświetla się komunikat: wynik został zapisany. W środkowej części ekranu znajdują się trzy przyciski: STATYSTYKI - po kliknięciu użytkownik przenoszony jest do okna statystyk pomiarów natężenia dźwięku, MAPA - po kliknięciu tego przycisku użytkownik przenoszony jest do aktywności map oraz PORADNIK - po kliknięciu użytkownik przenoszony jest do poradnika zawierającego rady dotyczące ochrony i zachowania zdrowego słuchu. W dolnej części ekranu umieszczone są natomiast przyciski USTAWIENIA - po kliknięciu użytkownik przenoszony jest do aktywności ustawień, w których może korygować dane do logowania i godziny trwania trybu nocnego oraz przycisk WYLOGUJ SIĘ, po kliknięciu, którego użytkownik zostaje wylogowany z aplikacji.
### Pomiar natężenia dźwięku w czasie rzeczywistym (w decybelach)
Warto podkreślić, że w naszej aplikacji zaimplementowałyśmy rozwiązania pozwalające na monitorowanie dźwięku w czasie rzeczywistym-działanie aplikacji DeciRADAR w tle.
### Statystyki użytkownika
Użytkownik aplikacji ma również możliwość monitorowania statystyk związanych z pomiarami natężenia dźwięku (w celu przejścia do aktywności statystyk należy kliknąć przycisk STATYSTYKI na ekranie głównym aplikacji). Automatycznie w trybie dziennym pomiary zapisywane są do Firestore co dwie godziny, a w trybie nocnym jednorazowo o 2:00. Użytkownik ma również możliwość ręcznego zapisania wartości natężenia dźwięku poprzez kliknięcie ikony ZAPISZ na ekranie głównym aplikacji. W oknie statystyk w pierwszej części zaimplementowano RecyclerView zawierający chronologicznie posortowane wartości natężenia dźwięku wraz z datami i godzinami pomiarów. Na czerwonym tle ukazane są wartości pomiarów, dla których zmierzone natężenie dźwięku przekroczyło 85 dB (źródło szkodliwego progu hałasu: https://www.audika.pl/blog/poziom-halasu), a na zielonym tle pomiary poniżej tej wartości. Ponadto dla zwiększenia czytelności obok każdego z pomiarów, po lewej stronie umieszczono ikony ukazujące, czy dany pomiar mieści się
w granicy nieuszkadzającego słuchu natężenia dźwięku (zielona ikona), czy też przekracza tę granicę (czerwona ikona). Użytkownik w oknie TWOJE STATYSTYKI ma również możliwość filtrowania pomiarów i wyświetlania ich dla ostatniego tygodnia, miesiąca, roku i lub wszystkich od początku korzystania z aplikacji. Ponadto po kliknięciu w dany pomiar widoczny na liście ze statystykami, użytkownik zostaje przeniesiony do nowej aktywności wyświetlającej szczegóły wybranego pomiaru tzn. godzinę, datę, wartość natężenia dźwięku i adres wykonania pomiaru, użytkownik może wyjść z tej aktywności klikając ikonę strzałki umieszczoną w lewym dolnym rogu ekranu. Oprócz tego zaimplementowałyśmy również możliwość usuwania pomiarów natężenia dźwięku przez użytkownika, jest to możliwe po dłuższym kliknięciu na dany pomiar, wówczas dla wybranego zapisu pojawia się okno zawierające zapytanie o to, czy użytkownik chce usunąć wybrany przez siebie pomiar. Jeśli użytkownik wybierze opcję TAK, pomiar jest usuwany z listy i z bazy danych, jeśli NIE to pomiar pozostaje na liście.
### Wykres i eksport wyników
W aktywności TWOJE STATYSTYKI, w dolej części ekranu znajdują się dwa przyciski: POWRÓT (przenoszący użytkownika do okna głównego aplikacji) oraz przycisk WYKRES - przenoszący użytkownika do okna zawierającego wykres natężenia dźwięku z ostatnich 30 dni. Na wykresie tym, zaznaczony jest również próg szkodliwości hałasu na poziomie 85 dB (ustalone na podstawie informacji ze strony: https://www.audika.pl/blog/poziom-halasu. Użytkownik w tym oknie po kliknięciu przycisku ZAPISZ ma również możliwość zapisania (eksportowania) wykresu do formatu PNG lub JPEG.
### Interaktywna mapa hałasu - mapy Googla
Zaimplementowałyśmy także funkcjonalność map Google w naszej aplikacji. Mapy znajdują się w oddzielnej aktywności aplikacji, do której można przejść klikając przycisk MAPA w oknie głównym. Po przejściu do tej aktywności, użytkownik ma możliwość zobaczenia zgłoszonych przez innych użytkowników aplikacji miejsc, które mają wysoki poziom hałasu oraz sam poprzez kliknięcie przycisku ZGŁOŚ HAŁAS ma możliwość zgłosić miejsce o wybranym poziomie hałasu (od 50 do 100 dB). Zgłoszone przez niego miejsce będzie dzięki temu widoczne dla innych użytkowników aplikacji (po zgłoszeniu miejsca o wysokim poziomie hałasu pojawia się komunikat: Zgłoszono hałas, a następnie Zgłoszenie zapisano w Firestore i miejsce zgłoszenia oznaczane jest na mapie pinezką w kolorze zależnym od zgłoszonego natężenia dźwięku. Ma to na celu stworzenie interaktywnej mapy poziomu hałasu w różnych lokalizacjach - może być to szczególnie pomocne dla osób szukających spokojnych miejsc do pracy/nauki/relaksu. Zgłaszane miejsca zapisywane są w bazie danych, tak, aby każdy użytkownik je widział. Cały mechanizm polega na utworzeniu nowego dokumentu w katalogu noiseReports, zawierającego konkretne koordynaty geograficzne: lat (ang. latitude - szerokość geograficzna) oraz lng (ang. longitude - długość geograficzna) a także zgłoszony poziom hałasu oraz znacznik czasu (moment, w którym dodano dane zgłoszenie, zapisane jako liczba milisekund od 1 stycznia 1970 (tzw. Unix epoch time - początek czasu w systemach komputerowych opartych na Unix/Linux)). Dodatkowo, w cel zwiększenia czytelności i funkcjonalności map w naszej aplikacji, w zależności od natężenia zgłaszanego przez użytkownika natężenia hałasu kolor pinezki wyświetlający się na mapie widocznej dla wszystkich użytkowników aplikacji jest różny w zależności od wartości zgłoszonych dB. Progi dla odpowiednich barw zgadzają się z danymi uzyskanymi ze strony https://soundproofingguide.com/decibels-level-comparison-chart/. Ponadto zaimplementowałyśmy również przydatną funkcję w postaci możliwości odwołania bądź potwierdzania hałaśliwych miejsc na mapie. oznacza to, że użytkownik aplikacji po wejściu w mapy i kliknięciu w daną pinezkę, która oznacza zgłoszone hałaśliwe miejsce otrzymuje komunikat z zapytanie, czy hałas jest nadal aktualny w danym miejscu,
jeśli kliknie NIE, wtedy pinezka oznaczonego, jako hałaśliwe miejsce, znika z mapy. Natomiast, jeśli klinie TAK pinezka pozostaje w danym miejscu i i użytkownik otrzymuje komunikat Dzięki za potwierdzenie!. Ma to na celu uniknięcie przechowywania na mapie nieaktualnych współrzędnych hałaśliwych miejsc i zwiększenie interakcji z użytkownikiem w celu maksymalizacji funkcjonalności naszej aplikacji. 
### Poradnik zdrowia z losowanymi sugestiami ochrony słuchu 
W naszej aplikacji dodałyśmy również  poradnik zawierający rady pozwalające na utrzymanie słuchu w dobrej kondycji. Użytkownik ma możliwość przejść do poradnika poprzez kliknięcie w oknie głównym aplikacji przycisku PORADNIK. W ramach implementacji poradnika, porady zdrowotne zapisano jako dokumenty w kolekcji HearingTips w Firestore. Użytkownik ma również możliwość wylosowania kolejnych porad poprzez kliknięcie w dolnej części aktywności poradnika przycisku WYLOSUJ KOLEJNĄ.
### Ustawienia
Użytkownik po kliknięciu przycisku USTAWIENIA na stronie głównej aplikacji jest przenoszony do strony, na której może dokonać zmian w ustawieniach tzn. może zmienić godziny rozpoczęcia i zakończenia trybu nocnego oraz może dokonać zmiany hasła. W celu sfinalizowania zmian należy kliknąć przycisk ZAPISZ w oknie ustawień. W oknie tym użytkownik ma również możliwość usunięcia swojego konta.
### Powiadomienia
Użytkownik otrzymuje powiadomienia, w przypadku, gdy aplikacja monitorując ciągle w czasie rzeczywistym natężenie dźwięku zarejestruje wynik natężenia powyżej 85 dB - Uwaga! Przebywasz w szkodliwym hałasie - pomiar: ..., a gdy wynik natężenia dźwięku przekracza 120 dB - użytkownikowi pokaże się komunikat o treści: Ostrzeżenie! Osiągnięto granicę bólu - pomiar: ... (źródło progów odpowiadających szkodliwemu hałasowi i progowi bólu: https://www.audika.pl/blog/poziom-halasu). Ponadto zaimplementowałyśmy również powiadomienia, które opierają się na aktualnej lokalizacji użytkownika, co oznacza, że użytkownik otrzymuje powiadomienie, jeśli zbliża się do miejsca zgłoszonego przez innego użytkownika na mapie, jako miejsce hałaśliwe. W zależności od wartości zgłoszonego hałasu w odpowiedniej odległości osoby od miejsca zgłoszenia hałasu wysyłane jest powiadomienie o zbliżaniu się do miejsca wystąpienia hałasu
### Powiadomienia push
Zaimplementowałyśmy również w naszej aplikacji powiadomienia push (przychodzące regularnie każdego dnia również, jeśli użytkownik nie jest zalogowany do aplikacji). Powiadomienia wykorzystują Firebase Cloud Messaging (FCM). Funkcją powiadomień jest zwrócenie użytkownikowi uwagi na konieczność wejścia do naszej aplikacji, by sprawdził poradę dnia, która pozwoli mu zadbać o dobrą kondycję swojego słuchu. Zaimplementowane powiadomienia mają na celu zachęcenie użytkownika do regularnego korzystania z aplikacji w celu dbania o swój słuch. 
### Wnioski
Najważniejszym wnioskiem, który możemy sformułować jest fakt, iż udało nam się zrealizować nasz projekt aplikacji DeciRADAR zgodnie z założeniami. Aplikacja oferuje liczne funkcjonalności zwiększające świadomość użytkowników dotyczącą zagrożeń związanych z narażeniem na hałaśliwe otoczenie. Umożliwia ona użytkownikowi monitorowanie hałasu w jego otoczeniu i analizowanie wpływu hałasu na jego zdrowie. Szczegółowe funkcjonalności finalnie dostępne w aplikacji scharakteryzowałyśmy poniżej: pomiar natężenia dźwięku w czasie rzeczywistym (w decybelach), powiadomienia o przebywaniu w zbyt głośnym otoczeniu (próg bólu i próg szkodliwości hałasu), powiadomienia push zachęcające do wejścia do aplikacji w celu sprawdzenia porad zdrowotnych odnośnie ochrony słuchu, statystyki narażenia na hałas w ciągu dnia, historia poziomu hałasu w formie wykresu -  zapis pomiarów w czasie i możliwość analizy trendów, dla celów medycznych i holistycznych, eksport danych – możliwość zapisu statystyk do formatu PNG/JPG, tryb ciągłego monitorowania – opcja działania w tle i ostrzegania użytkownika przed hałasem w czasie rzeczywistym, sugestie ochrony słuchu – uniwersalne wskazówki jak postępować, kiedy użytkownik znajdzie się w hałaśliwym otoczeniu, tryb nocny – automatyczna redukcja powiadomień i monitorowanie hałasu w sypialni, interaktywna mapa hałasu - użytkownicy aplikacji mogą udostępniać swoje pomiary natężenia dźwięku, przyczyniając się tym samym do tworzenia interaktywnej mapy poziomu hałasu w różnych lokalizacjach - może być to szczególnie pomocne dla osób szukających spokojnych miejsc do pracy/nauki/relaksu, możliwość zgłaszania zbyt głośnych miejsc na mapie, w celu poprawy jakości życia mieszkańców.



